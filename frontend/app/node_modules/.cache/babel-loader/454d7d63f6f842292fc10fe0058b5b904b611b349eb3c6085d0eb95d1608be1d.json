{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\petro\\\\Desktop\\\\Project\\\\frontend\\\\app\\\\src\\\\status_comments\\\\StatusComments.tsx\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport styles from './StatusComments.module.css';\nimport StatusDetails from \"../status_details/StatusDetails\";\nimport { useUserContext } from \"../hooks/useUserContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst StatusComments = () => {\n  _s();\n  const {\n    state\n  } = useUserContext();\n  const user = state.user;\n  const idParam = useParams();\n  const [status, setStatus] = useState(null);\n  const [text, setText] = useState('');\n  const [disabled, setDisabled] = useState(true);\n  const [commented, setCommented] = useState(false);\n  useEffect(() => {\n    const fetchData = async () => {\n      let body = {\n        id: idParam.id\n      };\n      const response = await fetch('http://localhost:4000/statuses/getWithId', {\n        method: 'POST',\n        body: JSON.stringify(body),\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      });\n      const json = await response.json();\n      if (response.ok) {\n        setStatus(json);\n        console.log(json);\n      } else {\n        console.log('Error fetching data!');\n      }\n    };\n    fetchData();\n  }, []);\n  const handleTextChange = ev => {\n    ev.preventDefault();\n    setText(ev.target.value);\n    if (ev.target.value !== '') setDisabled(false);else setDisabled(true);\n  };\n  const postComment = async () => {\n    const comment = {\n      username: user === null || user === void 0 ? void 0 : user.username,\n      text: text,\n      id: idParam.id\n    };\n    const response = await fetch('http://localhost:4000/statuses/comment', {\n      method: 'POST',\n      body: JSON.stringify(comment),\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    });\n    if (response.ok) {\n      setCommented(!commented);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: styles.container,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.status,\n      children: status && /*#__PURE__*/_jsxDEV(StatusDetails, {\n        status: status,\n        showButtons: false\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 28\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.commentsArea,\n      children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n        placeholder: \"Write a comment.\",\n        onChange: ev => handleTextChange(ev)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 17\n      }, this), !disabled && /*#__PURE__*/_jsxDEV(\"button\", {\n        className: styles.btn,\n        onClick: postComment,\n        children: \"Post\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 31\n      }, this), disabled && /*#__PURE__*/_jsxDEV(\"button\", {\n        className: styles.disabledBtn,\n        disabled: disabled,\n        children: \"Post\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 30\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.divider\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.commentsList,\n        children: status && status.comments.map(comment => /*#__PURE__*/_jsxDEV(\"div\", {\n          children: comment.text\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 25\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 69,\n    columnNumber: 9\n  }, this);\n};\n_s(StatusComments, \"vHA86OhM8X+XligqVHDxYEB4YVI=\", false, function () {\n  return [useUserContext, useParams];\n});\n_c = StatusComments;\nexport default StatusComments;\nvar _c;\n$RefreshReg$(_c, \"StatusComments\");","map":{"version":3,"names":["useEffect","useState","useParams","styles","StatusDetails","useUserContext","jsxDEV","_jsxDEV","StatusComments","_s","state","user","idParam","status","setStatus","text","setText","disabled","setDisabled","commented","setCommented","fetchData","body","id","response","fetch","method","JSON","stringify","headers","json","ok","console","log","handleTextChange","ev","preventDefault","target","value","postComment","comment","username","className","container","children","showButtons","fileName","_jsxFileName","lineNumber","columnNumber","commentsArea","placeholder","onChange","btn","onClick","disabledBtn","divider","commentsList","comments","map","_c","$RefreshReg$"],"sources":["C:/Users/petro/Desktop/Project/frontend/app/src/status_comments/StatusComments.tsx"],"sourcesContent":["import { ChangeEvent, useEffect, useState } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { Status } from \"../models/Status\";\r\nimport styles from './StatusComments.module.css';\r\nimport StatusDetails from \"../status_details/StatusDetails\";\r\nimport { Comment } from \"../models/Comment\";\r\nimport { useUserContext } from \"../hooks/useUserContext\";\r\n\r\nconst StatusComments = (): JSX.Element => {\r\n    const { state } = useUserContext();\r\n    const user = state.user;\r\n    const idParam = useParams<{id: string}>();\r\n    const [status, setStatus] = useState<Status | null>(null);\r\n    const [text, setText] = useState<String>('');\r\n    const [disabled, setDisabled] = useState<boolean>(true);\r\n    const [commented, setCommented] = useState<boolean>(false);\r\n\r\n    useEffect(() => {\r\n        const fetchData = async () => {\r\n            let body = {id: idParam.id}; \r\n            const response = await fetch('http://localhost:4000/statuses/getWithId', {\r\n                method: 'POST',\r\n                body: JSON.stringify(body),\r\n                headers: {\r\n                    'Content-Type': 'application/json' \r\n                }\r\n            });\r\n\r\n            const json = await response.json();\r\n\r\n            if (response.ok){\r\n                setStatus(json);\r\n                console.log(json);\r\n            }\r\n            else {\r\n                console.log('Error fetching data!');\r\n            }\r\n        }\r\n\r\n        fetchData();\r\n    }, []);\r\n\r\n    const handleTextChange = (ev: ChangeEvent<HTMLTextAreaElement>) => {\r\n        ev.preventDefault();\r\n        setText(ev.target.value);\r\n        if (ev.target.value !== '')\r\n            setDisabled(false);\r\n        else\r\n            setDisabled(true);\r\n    }\r\n\r\n    const postComment = async () => {\r\n        const comment = {username: user?.username, text: text, id: idParam.id};\r\n\r\n        const response = await fetch('http://localhost:4000/statuses/comment', {\r\n            method: 'POST',\r\n            body: JSON.stringify(comment),\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            }\r\n        });\r\n\r\n        if (response.ok){\r\n            setCommented(!commented);\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className={styles.container}>\r\n            <div className={styles.status}>\r\n                {status && <StatusDetails status={status} showButtons={false}/>}\r\n            </div>\r\n            <div className={styles.commentsArea}>\r\n                <textarea placeholder='Write a comment.' onChange={(ev) => handleTextChange(ev)}/>\r\n                {!disabled && <button className={styles.btn} onClick={postComment}>Post</button>}\r\n                {disabled && <button className={styles.disabledBtn} disabled={disabled}>Post</button>}\r\n                <div className={styles.divider}></div>\r\n                {/*Comments*/}\r\n                <div className={styles.commentsList}>\r\n                    {status && status.comments.map((comment: Comment) => (\r\n                        <div>\r\n                            {comment.text}\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n            </div>\r\n        </div>\r\n      );\r\n}\r\n\r\nexport default StatusComments;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}